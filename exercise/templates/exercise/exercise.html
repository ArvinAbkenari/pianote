
{% extends 'base.html' %}
{% load static %}
{% block title %}تمرین - پیانوت{% endblock %}
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'exercise/exercise.css' %}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{% endblock %}


{% block content %}
        <div class="dashboard-container dashboard-content ">
            <h1 class=" exercise_title mb-4">داشبورد تمرین</h1>
            <section class="song-selection-section">
                <h2>قطعه خود را انتخاب کنید</h2>
                <div class="song-library">
                    <div class="song-card">
                        <div class="song-info">
                            <h3>سونات مهتاب</h3>
                            <p>بتهوون</p>
                        </div>
                        <button class="select-btn">انتخاب</button>
                    </div>
                    <div class="song-card">
                        <div class="song-info">
                            <h3>برای الیز</h3>
                            <p>بتهوون</p>
                        </div>
                        <button class="select-btn">انتخاب</button>
                    </div>
                    <div class="upload-card">
                        <i class="bi bi-plus-circle-dotted"></i>
                        <p>بارگذاری قطعه جدید</p>
                    </div>
                </div>
            </section>

            <section class="practice-section">
                <h2>تمرین شما</h2>
                <div class="upload-container">
                    <div class="upload-box" id="practiceUpload">
                        <i class="bi bi-mic-fill"></i>
                        <p>بارگذاری ضبط تمرین شما</p>
                        <span>یا فایل صوتی را بکشید و رها کنید</span>
                        <input type="file" accept="audio/*" hidden>
                    </div>
                </div>

                <div class="visualization-container">
                    <div class="waveform-comparison">
                        <div class="waveform original">
                            <h4>اصلی</h4>
                            <div class="waveform-placeholder"></div>
                        </div>
                        <div class="waveform practice">
                            <h4>تمرین شما</h4>
                            <div class="waveform-placeholder"></div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="performance-metrics">
                <h2>تحلیل عملکرد</h2>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <h3>امتیاز دقت</h3>
                        <div class="score-circle">
                            <svg viewBox="0 0 36 36" class="circular-chart">
                                <path d="M18 2.0845
                                    a 15.9155 15.9155 0 0 1 0 31.831
                                    a 15.9155 15.9155 0 0 1 0 -31.831"
                                    fill="none"
                                    stroke="#eee"
                                    stroke-width="3"/>
                                <path d="M18 2.0845
                                    a 15.9155 15.9155 0 0 1 0 31.831
                                    a 15.9155 15.9155 0 0 1 0 -31.831"
                                    fill="none"
                                    stroke="var(--accent-color)"
                                    stroke-width="3"
                                    stroke-dasharray="75, 100"/>
                            </svg>
                            <span class="percentage">75%</span>
                        </div>
                    </div>
                    <div class="metric-card">
                        <h3>دقت زمان‌بندی</h3>
                        <div id="timingChart" class="chart-container">
                            <canvas id="timingCanvas"></canvas>
                        </div>
                    </div>
                    <div class="metric-card">
                        <h3>دقت نت‌ها</h3>
                        <div id="noteChart" class="chart-container">
                            <canvas id="noteCanvas"></canvas>
                        </div>
                    </div>
                    <div class="metric-card">
                        <h3>نمودار پیشرفت</h3>
                        <div id="progressChart" class="chart-container">
                            <canvas id="progressCanvas"></canvas>
                        </div>
                    </div>
                </div>
            </section>
        </div>


        {% endblock %}
        {% block extra_js %}
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{% static "exercise/exercise.js"%}"></script>
    {% endblock %}
